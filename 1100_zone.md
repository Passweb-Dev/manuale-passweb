# ZONE



La sezione "**Zone**" accessibile dalla voce di menu principale
"**Ordini**" consente all'amministratore del sito di codificare Zone di
Spedizione che potranno poi essere associate:

- alle Promozioni in Carrello

- ai Buoni Sconto

- alle Regole definite per i sistemi di Raccolta Punti

In questo modo sarà possibile creare Promozioni, Buoni Sconto e / o
Regole di raccolta punti validi solo nel momento in cui l'indirizzo di
spedizione associato all'utente che naviga il sito dovesse
effettivamente ricadere in una delle zone ad essi associate.

La Tabella "**Zone**" consente quindi di visualizzare tutte le Zone
attualmente configurate.

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_promo.bmp](./assets/media/image460.png){width="5.623611111111111in"
height="3.1819444444444445in"}

I pulsanti presenti nella relativa barra degli strumenti consentono
rispettivamente di:

- **Modifica Zona**
  (![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_modifica_zona.bmp](./assets/media/image461.png){width="0.5909722222222222in"
  height="0.1951388888888889in"} )**:** consente di modificare la Zona
  attualmente selezionata in elenco

- **Elimina Zona**
  (![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_elimina_zona.bmp](./assets/media/image462.png){width="0.5388888888888889in"
  height="0.18819444444444444in"} )**:** consente di eliminare la Zona
  attualmente selezionata in elenco

- **Copia Zona**
  (![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_copia_zona.bmp](./assets/media/image463.png){width="0.5131944444444444in"
  height="0.2076388888888889in"} )**:** consente di copiare la Zona
  attualmente selezionata in elenco

- **Aggiungi Zona**
  (![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_aggiungi_zona.bmp](./assets/media/image464.png){width="0.6041666666666666in"
  height="0.1951388888888889in"} )**:** consente di aggiungere una nuova
  Zona.

Cliccando su questo pulsante verrà visualizzata la maschera "**Nuova
Zona**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\nuova_zona.bmp](./assets/media/image465.png){width="5.623611111111111in"
height="3.1819444444444445in"}

all'interno della quale poter specificare i parametri di configurazione
della Zona stessa.

Nello specifico sarà necessario assegnare un nome alla Zona (sezione
"**Generale**" campo "**Nome**") in esame e, successivamente, definire
le Aree di Spedizione ad essa associate, operando per questo all'interno
della sezione "**Aree di Spedizione**".

![Videate\\zone_spedizione.bmp](./assets/media/image466.png){width="5.850694444444445in"
height="1.7208333333333334in"}

In questo senso sarà possibile agire in maniera inclusiva, andando
quindi ad includere una ad una tutte le aree geografiche da associare
alla Zona in esame, oppure, volendo sarà possibile operare anche in
maniera esclusiva andando cioè ad escludere dalla Zona in esame
determinate aree geografiche.

**Ovviamente nel momento in cui si dovesse decidere di lavora in maniera
"esclusiva" sarà comunque indispensabile includere nella stessa Zona
almeno un'area geografica valida**

**ATTENZIONE!** Zone di spedizione con sole aree geografiche da
escludere non avrebbero, ovviamente, alcun senso e se associate poi ad
una determinata Promozione in Carrello o a un determinato Buono Sconto
li renderebbero di fatto mai applicabili.

In altri termini supponendo, ad esempio, di dover applicare un
determinata Promozione solo nel caso in cui la merce debba poi essere
spedita in tutta Italia tranne che ad Anacapri, anziché andare ad
includere nella nostra Zona di spedizione uno ad uno tutte le regioni e
le provincie gestite, in maniera molto più semplice potremo:

- Creare una prima area geografica corrispondente a tutta l'Italia e
  quindi con le opzioni:

  - Gestione = Includi

  - Nazione = Italy

- Creare una seconda area geografica da escludere relativa alla sola
  città di Anacapri e quindi con le opzioni:

  - Gestione = Escludi

  - Nazione = Italy

  - Provincia = Napoli

  - CAP = 80071

Per includere o escludere determinate Aree di Spedizione da una
determinata Zona sarà necessario, per prima cosa salvare la Zona stessa,
cliccando per questo sull'apposito pulsante "**Salva**" presente nella
parte bassa della maschera.

In questo modo verrà automaticamente associata alla Zona in esame una
prima Area di Spedizione relativa a tutto il mondo e verranno anche
abilitati nuovi pulsanti nella barra degli strumenti della sezione "Aree
di Spedizione" che consentiranno rispettivamente di:

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\nuova_zona_2.bmp](./assets/media/image467.png){width="5.623611111111111in"
height="3.1819444444444445in"}

**Elimina Area** (
![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_elimina_area_spedizione.bmp](./assets/media/image468.png){width="0.5326388888888889in"
height="0.1951388888888889in"} ): consente di eliminare l'Area di
Spedizione attualmente selezionata

**Svuota** (
![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\pulsante_svuota.bmp](./assets/media/image469.png){width="0.34444444444444444in"
height="0.2076388888888889in"} ): consente di svuotare l'intera tabella
delle Aree di Spedizione

**Italia** (
![Videate\\pulsante_italia.bmp](./assets/media/image470.png){width="0.2791666666666667in"
height="0.1951388888888889in"} ): consente di associare alla zona di
spedizione che si sta codificando una specifica area geografica
all'interno della nazione Italia.

Cliccando su questo pulsante verrà infatti visualizzata la sezione
"**Configurazione Italia**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_configurazione_italia.bmp](./assets/media/image471.png){width="5.804861111111111in"
height="3.285416666666667in"}

all'interno della quale sarà necessario indicare un valore per i
seguenti parametri:

**Gestione**: consente di decidere se l'area geografica che si sta
codificando dovrà essere **inclusa** o **esclusa** dalla relativa zona
di spedizione:

**ATTENZIONE!** si ricorda che Zone di spedizione con sole aree
geografiche da escludere non avrebbero, ovviamente, alcun senso. Nel
momento in cui si dovesse decidere, dunque, di escludere determinate
aree geografiche da una zona di spedizione sarà di fondamentale
importanza verificare che, per la stessa zona, sia presente, almeno,
anche un' area geografica il cui parametro "**Gestione**" è stato
correttamente impostato su "**Includi**"

**Regione / Provincia / Località / CAP**: consente di specificare la
Regione / Provincia / Località / CAP dell'area geografica che si sta
codificando

Selezionando la regione verrà visualizzata la combo box relativa alle
provincie della regione stessa e, una volta indicata la provincia,
verranno visualizzati il campo relativo alle località e l'area
all'interno della quale poter differenziare ulteriormente in base ai
singoli codici di avviamento postale (**utile soprattutto nel caso in
cui sia necessario gestire i "C.A.P." disagiati**)

Per aggiungere un nuovo C.A.P. sarà sufficiente indicarlo all'interno
dell'apposito campo e confermare poi da tastiera con il pulsante
"Invio".

In fase di inserimento dei C.A.P è inoltre possibile utilizzare il
carattere "\_" come wildcard per sostituire uno dei caratteri
effettivamente presenti nel relativo codice di avviamento postale.

**ATTENZIONE!** è fondamentale gestire correttamente il carattere \_
ricordando sempre che **un "underscore" sostituisce un solo carattere**

Supponendo dunque di indicare come C.A.P. il valore "4_900" verranno poi
presi in considerazione e validati tutti i codici di avviamento postale
che hanno come primo carattere 4, come secondo carattere un qualunque
valore, come terzo carattere 9, come quarto carattere 0 e come quindi
carattere ancora 0

Supponendo invece di indicare come C.A.P. il valore "**47\_\_\_**" (47
seguito da tre distinti caratteri di underscore), verranno poi presi in
considerazione e validati tutti i codici di avviamento postale che
iniziano con 47 e che proseguono con altri 3 caratteri qualsiasi.

Relativamente al salvataggio della nuova area geografica occorre anche
considerare le seguenti casistiche:

- Se è già presente in elenco un'area geografica precedentemente
  codificata come "**Italia -- Tutte le regioni**" e, per la nuova area
  che si sta codificando, viene indicata invece oltre alla nazione
  Italia anche una specifica regione e/o provincia, alla conferma l'area
  "Italia-Tutte le Regioni" sarà automaticamente rimossa e sostituita
  dalla specifica area appena codificata

- Se in elenco sono già presenti una o più aree geografiche del tipo
  "**Italia-Regione-Specifica Provincia**" e per la nuova area che si
  sta codificando viene selezionata l'opzione "Tutte le regioni", alla
  conferma tutte le aree "Italia-Regione-Provincia" saranno rimosse

- Se è già presente in elenco un'area geografica codificata come
  "**Italia-Regione-Provincia-Cap**" e per la nuova area che si sta
  codificando viene indicata, oltre alla nazione Italia, anche la stessa
  regione e la stessa provincia ma non il CAP, alla conferma l'area
  precedentemente presente in elenco verrà eliminata e sostituita da
  quella nuova appena codificata

- Se è già presente in elenco un'area geografica codificata come
  "**Italia- Regione-Provincia**" e per la nuova area che si sta
  codificando viene indicata, oltre alla nazione Italia, anche la stessa
  regione, la stessa provincia e in più anche una specifica località e/o
  uno specifico CAP, alla conferma l'area precedentemente presente in
  elenco verrà eliminata e sostituita da quella nuova appena codificata.

- Se è già presente in elenco un'area geografica codificata come
  "**Italia -Regione-Provincia -- Località**" e per la nuova area che si
  sta codificando viene indicata, oltre alla nazione Italia anche la
  stessa regione, la stessa provincia, la stessa località e in più
  vengono indicati anche specifici CAP, alla conferma l'area
  precedentemente presente in elenco verrà eliminata e sostituita da
  quella nuova appena codificata.

- Se sono già presenti in elenco aree geografica codificate come
  "**Italia -- Regione-Provincia --Località --CAP**" e per la nuova area
  che si sta codificando viene indicata oltre alla nazione Italia anche
  la stessa regione, la stessa provincia e la stessa la località ma non
  il CAP, alla conferma tutte le aree precedentemente codificate anche
  il CAP associato verranno eliminate e sostituite da quella nuova
  appena codificata.

- Se sono già presenti in elenco aree geografica codificate come
  "**Italia -- Regione - Provincia --Località --CAP**" e per la nuova
  area che si sta codificando viene indicata oltre alla nazione Italia
  anche la stessa regione e la stessa provincia ma non il CAP e la
  Località, alla conferma tutte le aree precedentemente codificate anche
  il CAP e la località associata verranno eliminate e sostituite da
  quella nuova appena codificata.

**Paesi Esteri** (
![Videate\\pulsante_paesi_esteri.bmp](./assets/media/image385.png){width="0.5131944444444444in"
height="0.21458333333333332in"} ): consente di associare alla zona di
spedizione che si sta codificando una specifica area geografica
all'interno di una nazione diversa dall'Italia.

Cliccando su questo pulsante verrà visualizzata la maschera
"**Configurazione Paesi Esteri**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_configurazione_paesi_esteri.bmp](./assets/media/image472.png){width="5.804861111111111in"
height="3.49375in"}

all'interno della quale sarà necessario indicare un valore per i
seguenti parametri:

**Gestione**: consente di decidere se l'area geografica che si sta
codificando dovrà essere **inclusa** o **esclusa** dalla relativa zona
di spedizione:

**Nazione / Stato / Provincia / Località / CAP**: consente di
specificare la Nazione, lo Stato / Provincia, la Località e il CAP
dell'area geografica che si sta codificando

Nel momento in cui l'esigenza dovesse essere quella di inserire,
all'interno di una zona geografica, più provincie contemporaneamente,
sarà sufficiente selezionarle dal relativo elenco sulla sinistra in
corrispondenza del campo "Stato / Provincia" ed inserirle in quello di
destra cliccando sull'icona della piccola freccia verde rivolta verso
destra.

Anche in questo caso in fase di inserimento di eventuali C.A.P sarà
possibile utilizzare il carattere "\_" come wildcard per sostituire uno
dei caratteri effettivamente presenti nel relativo codice di avviamento
postale.

**Nazioni** (
![Videate\\pulsante_nazioni.bmp](./assets/media/image473.png){width="0.38958333333333334in"
height="0.2013888888888889in"} ): consente di associare all'Area di
spedizione che si sta codificando una zona geografica relativa ad
un'intera Nazione (comunque diversa dall'Italia). Tale opzione risulta
quindi utile nel caso in cui si debbano configurare delle spese di
trasporto identiche per una o più Nazioni, senza dover necessariamente
indicare il dettaglio dello Stato/Provincia, della Località o del Codice
di Avviamento Postale.

Cliccando su questo pulsante verrà visualizzata la maschera
"**Configurazione Nazioni**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_configurazione_nazioni.bmp](./assets/media/image474.png){width="5.804861111111111in"
height="3.49375in"}

all'interno della quale sarà necessario indicare un valore per i
seguenti parametri:

**Gestione**: consente di decidere se l'area geografica che si sta
codificando dovrà essere **inclusa** o **esclusa** dalla relativa zona
di spedizione:

**Nazioni:** consente di indicare l'elenco delle Nazioni che devono
essere associate alla zona di spedizione che si sta codificando

Per associare alla zona di spedizione una specifica Nazione, è
sufficiente selezionarla dall'elenco di sinistra ed inserirla in quello
di destra cliccando sul pulsante raffigurante una piccola freccia verde
rivolta verso destra. Allo stesso modo per eliminare l'associazione tra
le zona di spedizione in esame ed una specifica Nazione, sarà
sufficiente selezionarla dall'elenco di destra e cliccare poi sul
pulsante raffigurante la piccola freccia rossa rivolta verso sinistra

**Importa da file** ( ): consente di definire le varie aree geografiche
da associare alla zona di spedizione in esame importandole in blocco da
un file di tipo txt o csv appositamente formattato.

Cliccando su questo pulsante verrà visualizzata la maschera
"**Importazione Aree da File**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_importazione_aree_da_file.bmp](./assets/media/image475.png){width="5.792361111111111in"
height="3.4805555555555556in"}

all'interno della quale poter selezionare (campo **File**), importandolo
ad esempio dal proprio pc, il file .txt o .csv con indicate tutte le
aree geografiche da associare alla zona in esame.

Il campo **Separatore** consente invece di indicare, selezionandolo,
dall'apposito menu a tendina, il carattere che è stato utilizzato
all'interno del file di importazione come separatore per i vari campi

Affinché la procedura possa terminare in maniera corretta è necessario
che il file txt o csv utilizzato soddisfi determinate regole. Nello
specifico:

- L'intestazione, ossia la prima riga del file, deve essere costituita
  dai seguenti campi

> *gestione;nazione;provincia;localita;cap;km*

- per ogni record del file (e quindi per ogni area geografica) è
  possibile inserire, nell'ordine indicato, le seguenti informazioni:

  - **gestione: 0** nel caso in cui la relativa area geografica debba
    essere inclusa nella Zona, **1** nel caso in cui la relativa area
    geografica debba essere esclusa

> **ATTENZIONE!** Il campo "gestione" non è obbligatorio e può quindi
> anche non essere inserito nel tracciato record del file di
> importazione. In questo caso (**campo non specificato**) **la relativa
> area geografica verrà considerata, a default, come inclusa** nella
> zona di spedizione

- **nazione**: codice iso a 2 caratteri della nazione

- **provincia**: sigla della provincia

- **localita**: nome della localita

- **cap**: codice di avviamento postale della localita (con possibilità
  di utilizzare il carattere "\_" come carattere wildcard)

<!-- -->

- Il carattere separatore dei vari campi deve essere esattamente quello
  indicato all'interno del campo "**Separatore**" presente nel form di
  importazione

- Il file di importazione deve soddisfare le specifiche del formato
  RFC4180.

> In questo senso è quindi necessario che il valore dei campi contenenti
> interruzioni di riga, doppi apici e/o lo stesso carattere utilizzato
> anche come separatore sia necessariamente racchiuso da virgolette

Supponendo di voler utilizzare come carattere separatore il ; la
struttura del file potrebbe quindi essere:

FR;;;;

IT;SA;;;

IT;RN;;47900;

IT;RN;Viserba;47922;

IT;RN;Viserbella;;

Nelle condizioni sopra indicate verrebbero quindi aggiunte alla zona di
spedizione in esame 5 distinte aree geografiche: la prima relativa alla
nazione Francia, la seconda relativa all'area geografica corrispondente
alla provincia di Salerno in Italia, la terza relativa alla provincia di
Rimini e nello specifico al codice di avviamento postale 47900, la
quarta sempre relativa alla provincia di rimini ma più specificatamente
alla località Viserba e al codice di avviamento postale 47922. Infine la
quinta relativa alla provincia di rimini e nello specifico alla località
Viserbella.

> **NOTA BENE:** nel caso di "Importazione da file" non verranno
> effettuati controlli di alcun tipo relativamente alle aree geografiche
> eventualmente già associate alla zona in esame. Occorre quindi fare
> particolare attenzioni, in queste condizioni, a non inserire delle
> aree geografiche doppie o triple.

**Esporta** (
![Videate\\pulsante_esporta_testo.bmp](./assets/media/image476.png){width="0.3506944444444444in"
height="0.18194444444444444in"} ): consente di esportare all'interno di
un file csv, nello stesso formato valido anche per l'importazione,
l'elenco di tutte le aree geografiche attualmente associate alla zona di
spedizione in esame.

Cliccando su questo pulsante verrà visualizzata la maschera
"**Esportazione Aree**"

![\\\\doctohelp\\D\\ManPassweb_Ecommerce_Sviluppo\\Videate\\zone_esportazione_aree.bmp](./assets/media/image477.png){width="5.792361111111111in"
height="3.4805555555555556in"}

all'interno della quale poter indicare il carattere separatore che dovrà
essere utilizzato in fase di creazione del file csv.

Il pulsante "**Salva**" presente nella parte bassa della maschera
consente di avviare la procedura di esportazione

Una volta definite le Zone di Spedizione desiderate sarà poi possibile
associarle alle Promozioni in Carrello, ai Buoni Sconto o alle Regole di
raccolta punti attualmente gestite all'interno del proprio sito. Per
maggiori informazioni in merito a questo tipo di operazione si veda
quanto indicato all'interno dei relativi capitoli di questo manuale

